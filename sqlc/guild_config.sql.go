// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: guild_config.sql

package sqlc

import (
	"context"
)

const addGuildConfig = `-- name: AddGuildConfig :exec
INSERT OR IGNORE INTO guild_config (
    guild_id,
    enabled,
    category_id,
    channel_access_offset,
    channel_delete_offset,
    participation_confirm_offset
) VALUES (
    ?1,
    ?2,
    ?3,
    ?4,
    ?5,
    ?6
)
`

type AddGuildConfigParams struct {
	GuildID                    string `db:"guild_id"`
	Enabled                    int64  `db:"enabled"`
	CategoryID                 string `db:"category_id"`
	ChannelAccessOffset        int64  `db:"channel_access_offset"`
	ChannelDeleteOffset        int64  `db:"channel_delete_offset"`
	ParticipationConfirmOffset int64  `db:"participation_confirm_offset"`
}

func (q *Queries) AddGuildConfig(ctx context.Context, arg AddGuildConfigParams) error {
	_, err := q.exec(ctx, q.addGuildConfigStmt, addGuildConfig,
		arg.GuildID,
		arg.Enabled,
		arg.CategoryID,
		arg.ChannelAccessOffset,
		arg.ChannelDeleteOffset,
		arg.ParticipationConfirmOffset,
	)
	return err
}

const deleteGuildConfig = `-- name: DeleteGuildConfig :exec
DELETE FROM guild_config
WHERE guild_id = ?1
`

func (q *Queries) DeleteGuildConfig(ctx context.Context, guildID string) error {
	_, err := q.exec(ctx, q.deleteGuildConfigStmt, deleteGuildConfig, guildID)
	return err
}

const disableGuild = `-- name: DisableGuild :exec
UPDATE guild_config
SET
    enabled = 0
WHERE guild_id = ?1
`

func (q *Queries) DisableGuild(ctx context.Context, guildID string) error {
	_, err := q.exec(ctx, q.disableGuildStmt, disableGuild, guildID)
	return err
}

const getGuildConfig = `-- name: GetGuildConfig :one
SELECT
    guild_id,
    enabled,
    category_id,
    channel_access_offset,
    channel_delete_offset,
    participation_confirm_offset
FROM guild_config
WHERE guild_id = ?1
`

type GetGuildConfigRow struct {
	GuildID                    string `db:"guild_id"`
	Enabled                    int64  `db:"enabled"`
	CategoryID                 string `db:"category_id"`
	ChannelAccessOffset        int64  `db:"channel_access_offset"`
	ChannelDeleteOffset        int64  `db:"channel_delete_offset"`
	ParticipationConfirmOffset int64  `db:"participation_confirm_offset"`
}

func (q *Queries) GetGuildConfig(ctx context.Context, guildID string) (GetGuildConfigRow, error) {
	row := q.queryRow(ctx, q.getGuildConfigStmt, getGuildConfig, guildID)
	var i GetGuildConfigRow
	err := row.Scan(
		&i.GuildID,
		&i.Enabled,
		&i.CategoryID,
		&i.ChannelAccessOffset,
		&i.ChannelDeleteOffset,
		&i.ParticipationConfirmOffset,
	)
	return i, err
}

const getGuildConfigByCategory = `-- name: GetGuildConfigByCategory :one
SELECT
    guild_id,
    enabled,
    category_id,
    channel_access_offset,
    channel_delete_offset,
    participation_confirm_offset
FROM guild_config
WHERE category_id = ?1
LIMIT 1
`

type GetGuildConfigByCategoryRow struct {
	GuildID                    string `db:"guild_id"`
	Enabled                    int64  `db:"enabled"`
	CategoryID                 string `db:"category_id"`
	ChannelAccessOffset        int64  `db:"channel_access_offset"`
	ChannelDeleteOffset        int64  `db:"channel_delete_offset"`
	ParticipationConfirmOffset int64  `db:"participation_confirm_offset"`
}

func (q *Queries) GetGuildConfigByCategory(ctx context.Context, categoryID string) (GetGuildConfigByCategoryRow, error) {
	row := q.queryRow(ctx, q.getGuildConfigByCategoryStmt, getGuildConfigByCategory, categoryID)
	var i GetGuildConfigByCategoryRow
	err := row.Scan(
		&i.GuildID,
		&i.Enabled,
		&i.CategoryID,
		&i.ChannelAccessOffset,
		&i.ChannelDeleteOffset,
		&i.ParticipationConfirmOffset,
	)
	return i, err
}

const isGuildEnabled = `-- name: IsGuildEnabled :one
SELECT enabled
FROM guild_config
WHERE guild_id = ?1
`

func (q *Queries) IsGuildEnabled(ctx context.Context, guildID string) (int64, error) {
	row := q.queryRow(ctx, q.isGuildEnabledStmt, isGuildEnabled, guildID)
	var enabled int64
	err := row.Scan(&enabled)
	return enabled, err
}

const nextMatchCounter = `-- name: NextMatchCounter :one
UPDATE guild_config
SET match_counter = match_counter + 1
WHERE guild_id = ?1
RETURNING match_counter
`

func (q *Queries) NextMatchCounter(ctx context.Context, guildID string) (int64, error) {
	row := q.queryRow(ctx, q.nextMatchCounterStmt, nextMatchCounter, guildID)
	var match_counter int64
	err := row.Scan(&match_counter)
	return match_counter, err
}

const updateCategoryId = `-- name: UpdateCategoryId :exec
UPDATE guild_config
SET
    category_id = ?1
WHERE guild_id = ?2
`

type UpdateCategoryIdParams struct {
	CategoryID string `db:"category_id"`
	GuildID    string `db:"guild_id"`
}

func (q *Queries) UpdateCategoryId(ctx context.Context, arg UpdateCategoryIdParams) error {
	_, err := q.exec(ctx, q.updateCategoryIdStmt, updateCategoryId, arg.CategoryID, arg.GuildID)
	return err
}

const updateGuildConfig = `-- name: UpdateGuildConfig :exec
UPDATE guild_config
SET
    enabled = ?1,
    channel_access_offset = ?2,
    channel_delete_offset = ?3,
    participation_confirm_offset = ?4
WHERE guild_id = ?5
`

type UpdateGuildConfigParams struct {
	Enabled                    int64  `db:"enabled"`
	ChannelAccessOffset        int64  `db:"channel_access_offset"`
	ChannelDeleteOffset        int64  `db:"channel_delete_offset"`
	ParticipationConfirmOffset int64  `db:"participation_confirm_offset"`
	GuildID                    string `db:"guild_id"`
}

func (q *Queries) UpdateGuildConfig(ctx context.Context, arg UpdateGuildConfigParams) error {
	_, err := q.exec(ctx, q.updateGuildConfigStmt, updateGuildConfig,
		arg.Enabled,
		arg.ChannelAccessOffset,
		arg.ChannelDeleteOffset,
		arg.ParticipationConfirmOffset,
		arg.GuildID,
	)
	return err
}
